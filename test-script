-- Services
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Remote
local Grade = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Grade")

-- Settings
local INTERVAL = 0.08        -- time between "cycles" (all characters once)
local PER_CALL_DELAY = 0.18  -- cooldown between each character roll (try 0.10–0.25)
local ACTION = "Roll"

-- State
local running = false
local alive = true
local pressCount = 0
local inputConnection

-- MULTI-CALL FIRE (edit names here)
local function fire()
	if not alive then return end

	-- Pack 1
	---Grade:FireServer(ACTION, "XXX")
	---task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Satella")
	task.wait(PER_CALL_DELAY)

	--Grade:FireServer(ACTION, "XXX")
	--task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Roswaal")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Beatrice")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Garfiel")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Ram")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Rem Zero")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Subaru")
	task.wait(PER_CALL_DELAY)

	-- Pack 2
	--Grade:FireServer(ACTION, "XXX")
	--task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Aura")
	task.wait(PER_CALL_DELAY)

	--Grade:FireServer(ACTION, "XXX")
	--task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Denken")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Eisen")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Himmel")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Fern")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Stark")
	task.wait(PER_CALL_DELAY)

	Grade:FireServer(ACTION, "Frieren")
	task.wait(PER_CALL_DELAY)

	-- task.wait(PER_CALL_DELAY)
	-- Grade:FireServer(ACTION, "Morgana")
end

-- Loop
local function spamLoop()
	while running and alive do
		fire()
		task.wait(INTERVAL)
	end
end

-- ☠️ Kill switch (absolute termination)
local function Kill()
	if not alive then return end
	alive = false
	running = false

	if inputConnection then
		inputConnection:Disconnect()
		inputConnection = nil
	end

	task.wait() -- allow loop to exit cleanly
	script:Destroy()
end

-- R press logic: ON → OFF → KILL
local function handleRPress()
	if not alive then return end

	pressCount += 1

	if pressCount == 1 then
		running = true
		task.spawn(spamLoop)
		warn("Grade spam: ON")

	elseif pressCount == 2 then
		running = false
		warn("Grade spam: OFF")

	elseif pressCount >= 3 then
		warn("Script terminated")
		Kill()
	end
end

-- Bind R
inputConnection = UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end
	if input.KeyCode == Enum.KeyCode.R then
		handleRPress()
	end
end)
