-- Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local Service = game:GetService("ReplicatedStorage")

-- Folder
local tokensFolder = workspace:WaitForChild("Items")
	:WaitForChild("Tokens")
	:WaitForChild("Client")

-- Settings
local COLLECT_COOLDOWN = 10 * 60

-- Remote
local collect = Service.Remotes:WaitForChild("Potion")

-- State
local priorityActive = false

-- Teleport
local function teleportToPart(part)
	if not part or not part:IsA("BasePart") then return end
	
	local character = player.Character or player.CharacterAdded:Wait()
	local hrp = character:WaitForChild("HumanoidRootPart")
	
	hrp.CFrame = part.CFrame + Vector3.new(0, 3, 0)
end

-- ===============================
-- Travel + Potions Loop
-- ===============================

task.spawn(function()
	while true do
		
		priorityActive = true
		
		collect:FireServer("Collect","TravelToken1")
		collect:FireServer("Collect","TravelToken2")
		collect:FireServer("Collect","Luck")
		collect:FireServer("Collect","HatchTime")

		task.wait(5)

		priorityActive = false
		
		task.wait(COLLECT_COOLDOWN)
	end
end)

-- ===============================
-- Trait Tokens
-- ===============================

local function isValidToken(part)
	if not part:IsA("BasePart") then return false end
	local number = tonumber(part.Name)
	return number and number >= 1 and number <= 30
end

-- Existing Tokens
for _, child in ipairs(tokensFolder:GetChildren()) do
	if isValidToken(child) then
		teleportToPart(child)
		task.wait(0.2)
	end
end

-- New Token
tokensFolder.ChildAdded:Connect(function(child)
	if priorityActive then return end
	
	if isValidToken(child) then
		teleportToPart(child)
	end
end)
